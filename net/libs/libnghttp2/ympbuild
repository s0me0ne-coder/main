#!/usr/bin/env bash
name='libnghttp2'
release='5'
version='1.58.0'
url='https://github.com/nghttp2/nghttp2'
description='HTTP/2 C Library'
email=' aliriza.keskin@pardus.org.tr'
maintainer=' aliriza'
license=('MIT')
source=("https://github.com/nghttp2/nghttp2/releases/download/v${version}/nghttp2-${version}.tar.gz")
depends=( )
makedepends=( )
md5sums=('43a5bbe2fe5997c8ce0f907d18f0d863')
arch=('x86_64')
group=(net.libs)
uses=(libxml2)
libxml2_depends=(libxml2)

cd nghttp2-$version

setup(){
    ./configure --prefix=/usr \
        --libdir=/usr/lib64 \
        --without-neverbleed \
        --without-jemalloc \
        --disable-examples \
        --enable-static \
        --enable-lib-only\
        $(use_opt libxml2 --with-libxml2 --without-libxml2)
}

build(){
    make $jobs
}

package(){
    make install $jobs
}

