#!/usr/bin/env bash
name='lxsession'
release='1'
version='0.5.5'
url='https://lxde.org'
description='Lightweight X11 session manager'
email='akarsu@protonmail.com'
maintainer='akarsu'
license=('GPL2')
source=("https://downloads.sourceforge.net/lxde/$name-$version.tar.xz")
depends=(gtk3 polkit)
makedepends=(intltool vala docbook-xsl)
md5sums=('e8380acef215ee7c99c067a2241c2c7b')
group=(lxde.base)
uses=()
arch=('x86_64')

cd $name-$version
rm *.stamp
setup(){
    autoreconf -fvi
    ./configure --sysconfdir=/etc \
        --libexecdir=/usr/lib \
        --enable-gtk3 \
        --prefix=/usr \
        --libdir=/usr/lib64/
}

build(){
    make $jobs
}

package(){
    make  DESTDIR="$DESTDIR" install $jobs
    # Ignore package by AppStream to avoid duplicated IDs
    echo 'X-AppStream-Ignore=true' >> "$DESTDIR/usr/share/applications/lxsession-default-apps.desktop"
    echo 'X-AppStream-Ignore=true' >> "$DESTDIR/usr/share/applications/lxsession-edit.desktop"
}

